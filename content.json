{"meta":{"title":"Bondi_blue","subtitle":"","description":"Colinçš„ä¸ªäººåšå®¢","author":"Colin Jin","url":"localhost:4000","root":"/"},"pages":[{"title":"å…³äº","date":"2019-11-28T15:20:24.596Z","updated":"2019-11-28T15:20:24.590Z","comments":true,"path":"about/index.html","permalink":"about/index.html","excerpt":"","text":"æˆ‘æ˜¯ä¸ªå¿«ä¹çš„å°ç å†œï¼Œç°ä»äº‹äºiOSå¼€å‘å·¥ä½œï¼Œå–œæ¬¢ç¾å‰§å’Œå„ç§é£æ ¼çš„çº¯éŸ³ä¹ã€‚ å…³äºä¸»é¢˜æœ¬ç«™ä¸»é¢˜æ˜¯ï¼šMaterial X ä¸ä¸»é¢˜ç›¸å…³çš„ç–‘é—®è¯·å‰å»ä¸»é¢˜æ–‡æ¡£é¡µé¢æŸ¥è¯¢æˆ–è€…ç•™è¨€ï¼Œè°¢è°¢ï¼ å…³äºå‹é“¾å‹é“¾é¡µï¼šhttps://xaoxuu.com/friends/ æƒ³æ·»åŠ å‹é“¾çš„æœ‹å‹è¯·å°†æœ¬ç«™ä¸»é¡µ https://xaoxuu.com æ·»åŠ åˆ°è´µç«™çš„å‹é“¾ä¸­ï¼Œç„¶ååœ¨æˆ‘çš„å‹é“¾é¡µç•™è¨€ï¼Œæˆ‘çœ‹åˆ°åä¼šåŠæ—¶æ·»åŠ ï¼ˆåªé™éç›ˆåˆ©æ€§ç½‘ç«™ï¼‰ã€‚ One More Thingæ‡’åŠ è½½å ä½å›¾å¦‚æœå–œæ¬¢è¯·æ‹¿å»ï¼šå›¾ç‰‡é“¾æ¥ æ¬¢è¿çŒæ°´"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2019-11-28T03:41:13.627Z","updated":"2019-11-28T03:41:13.627Z","comments":true,"path":"categories/index.html","permalink":"categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-11-28T03:55:55.764Z","updated":"2019-11-28T03:55:55.758Z","comments":true,"path":"tags/index.html","permalink":"tags/index.html","excerpt":"","text":""},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2018-10-23T01:33:09.000Z","updated":"2019-11-28T11:48:41.392Z","comments":true,"path":"friends/index.html","permalink":"friends/index.html","excerpt":"","text":""},{"title":"404 Not Found","date":"2019-11-28T04:14:20.999Z","updated":"2019-11-28T04:14:20.999Z","comments":true,"path":"404.html","permalink":"404.html","excerpt":"","text":"404 Not Found **å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨** å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"}],"posts":[{"title":"iOSå¤šçº¿ç¨‹çŸ¥è¯†æ¢³ç†","slug":"iOS å¤šçº¿ç¨‹çŸ¥è¯†æ¢³ç†","date":"2019-10-18T02:12:40.000Z","updated":"2019-10-21T07:13:20.000Z","comments":true,"path":"2019/10/18/iOS å¤šçº¿ç¨‹çŸ¥è¯†æ¢³ç†/","link":"","permalink":"2019/10/18/iOS å¤šçº¿ç¨‹çŸ¥è¯†æ¢³ç†/","excerpt":"","text":"è¿›ç¨‹ã€çº¿ç¨‹ä¸é˜Ÿåˆ—è¿›ç¨‹ä¸çº¿ç¨‹ è¿›ç¨‹æ˜¯ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªè¿›ç¨‹ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªè¿›ç¨‹å‡è¿è¡Œåœ¨ä¸“ç”¨ä¸”å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´å†… çº¿ç¨‹æ˜¯è¿›ç¨‹çš„åŸºæœ¬æ‰§è¡Œå•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä»»åŠ¡éƒ½åœ¨çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥ä¸€ä¸ªè¿›ç¨‹ç”±è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ç»„æˆ å¤šçº¿ç¨‹ä¸€ä¸ªçº¿ç¨‹ä¸­çš„ä»»åŠ¡æ˜¯ä¸²è¡Œçš„ï¼ŒåŒä¸€æ—¶é—´å†…ï¼Œä¸€ä¸ªçº¿ç¨‹åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¯ä»¥å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚åŒä¸€æ—¶é—´ï¼ŒCPUåªèƒ½å¤„ç†ä¸€æ¡çº¿ç¨‹ï¼Œå¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œæ˜¯CPUå¿«é€Ÿåœ°åœ¨å¤šæ¡çº¿ç¨‹ä¹‹é—´è°ƒåº¦ iOSçš„å¤šçº¿ç¨‹æŠ€æœ¯æœ‰ï¼špthreadã€NSThreadã€GCDã€NSOperation ä¸»çº¿ç¨‹ä¸»çº¿ç¨‹ä¸»è¦è´Ÿè´£æ˜¾ç¤ºå’Œåˆ·æ–°UIç•Œé¢ï¼Œå¤„ç†UIäº‹ä»¶ é˜Ÿåˆ—çš„ç±»å‹ ä¸»é˜Ÿåˆ—ï¼šdispatch_get_main_queue å…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼šdispatch_get_global_queue è‡ªå·±åˆ›å»ºé˜Ÿåˆ—ï¼šdispatch_queue_create çº¿ç¨‹é€šä¿¡GCD: 1dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;2 &#x2F;&#x2F; åœ¨è¿™é‡Œæ‰§è¡Œè€—æ—¶æ“ä½œ3 dispatch_async(dispatch_get_main_queue(), ^&#123;4 &#x2F;&#x2F; å›åˆ°ä¸»çº¿ç¨‹ï¼Œæ‰§è¡ŒUIåˆ·æ–°æ“ä½œ5 &#125;);6&#125;); NSOperationQueue: 1[[NSOperationQueue new] addOperationWithBlock:^&#123;2 NSLog(@&quot;å­çº¿ç¨‹ä¸‹è½½: %@&quot;, NSOperationQueue.currentQueue);3 [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123;4 NSLog(@&quot;ä¸»çº¿ç¨‹åˆ·æ–°UI: %@&quot;, NSOperationQueue.currentQueue);5 &#125;];6&#125;]; æ­»é”æ­»é”å°±æ˜¯é˜Ÿåˆ—å¼•èµ·çš„å¾ªç¯ç­‰å¾…ï¼šåœ¨ä¸²è¡Œé˜Ÿåˆ—Aä¸­å‘é˜Ÿåˆ—Aæ·»åŠ ä¸€ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œä¾‹å¦‚ä¸»é˜Ÿåˆ—åŒæ­¥ï¼š 1- (void)viewDidLoad &#123;2 [super viewDidLoad];3 dispatch_sync(dispatch_get_main_queue(), ^&#123; &#x2F;&#x2F; ğŸ‘ˆæ­»é”åœ¨è¿™ä¸€è¡Œ4 &#x2F;&#x2F; NSLog(@&quot;åœ¨ä¸»é˜Ÿåˆ—åŒæ­¥æ‰§è¡Œ&quot;);5 &#125;);6&#125; æˆ–è€…åœ¨è‡ªå®šä¹‰çº¿ç¨‹ä¸­ï¼š 1&#x2F;&#x2F; NOT OK2- (void)test1 &#123;3 NSLog(@&quot;åœ¨ä¸»çº¿ç¨‹æ·»åŠ ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—queue&quot;);4 dispatch_queue_t queue &#x3D; dispatch_queue_create(&quot;test&quot;, DISPATCH_QUEUE_SERIAL);5 dispatch_async(queue, ^&#123;6 NSLog(@&quot;åœ¨ä¸²è¡Œé˜Ÿåˆ—queueä¸­æ·»åŠ ä¸€ä¸ªåŒæ­¥ä»»åŠ¡&quot;);7 dispatch_sync(queue, ^&#123; &#x2F;&#x2F; ğŸ‘ˆæ­»é”åœ¨è¿™ä¸€è¡Œ8 NSLog(@&quot;OK&quot;);9 &#125;);10 &#125;);11&#125;1213&#x2F;&#x2F; è¿™æ ·å°±ä¸ä¼šæ­»é”äº†14- (void)test2 &#123;15 NSLog(@&quot;åœ¨ä¸»çº¿ç¨‹æ·»åŠ ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—queue&quot;);16 dispatch_queue_t queue &#x3D; dispatch_queue_create(&quot;test&quot;, DISPATCH_QUEUE_SERIAL);17 dispatch_queue_t queue2 &#x3D; dispatch_queue_create(&quot;test&quot;, DISPATCH_QUEUE_SERIAL);18 dispatch_async(queue, ^&#123;19 NSLog(@&quot;åœ¨ä¸²è¡Œé˜Ÿåˆ—queue2ä¸­æ·»åŠ ä¸€ä¸ªåŒæ­¥ä»»åŠ¡&quot;);20 dispatch_sync(queue2, ^&#123;21 NSLog(@&quot;OK&quot;);22 &#125;);23 &#125;);24&#125; çº¿ç¨‹ç®¡ç†è®¾ç½®æœ€å¤§å¹¶å‘æ•°NSOperationQueueï¼š 1- (void)setMaxConcurrentOperationCount:(NSInteger)cnt; è®¾ç½®ä¾èµ–1NSOperationQueue *queue &#x3D; [[NSOperationQueue alloc] init];2NSOperation *op1 &#x3D; [NSBlockOperation blockOperationWithBlock:^&#123;3 sleep(1);4 NSLog(@&quot;ä¸‹è½½å›¾ç‰‡1&quot;);5&#125;];6NSOperation *op2 &#x3D; [NSBlockOperation blockOperationWithBlock:^&#123;7 sleep(1);8 NSLog(@&quot;ä¸‹è½½å›¾ç‰‡2&quot;);9&#125;];10NSOperation *combine &#x3D; [NSBlockOperation blockOperationWithBlock:^&#123;11 NSLog(@&quot;åˆæˆå›¾ç‰‡&quot;);12&#125;];13[combine addDependency:op1];14[combine addDependency:op2];1516[queue addOperation:op1];17[queue addOperation:op2];18[queue addOperation:combine]; è®¾ç½®æ …æ è‹¥å¹²ä¸ªç½‘ç»œè¯·æ±‚ç»“æŸåæ‰§è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼š 1dispatch_queue_t queue &#x3D; dispatch_queue_create(&quot;test&quot;, DISPATCH_QUEUE_CONCURRENT);2dispatch_group_t group &#x3D; dispatch_group_create();3for (int i &#x3D; 0; i &lt; 10; i++) &#123;4 dispatch_group_async(group, queue, ^&#123;5 sleep(1);6 NSLog(@&quot;ç½‘ç»œè¯·æ±‚ ---- %d&quot;,i);7 &#125;);8&#125;9dispatch_barrier_sync(queue, ^&#123;10 NSLog(@&quot;ä¸»çº¿ç¨‹åˆ·æ–°UI&quot;);11&#125;); é€šè¿‡NSOperationQueueå®ç°ï¼š 1NSOperationQueue *queue &#x3D; [[NSOperationQueue alloc] init];2for (int i &#x3D; 0; i &lt; 10; i++) &#123;3 NSOperation *op &#x3D; [NSBlockOperation blockOperationWithBlock:^&#123;4 sleep(1);5 NSLog(@&quot;ç½‘ç»œè¯·æ±‚ ---- %d&quot;,i);6 &#125;];7 [queue addOperation:op];8&#125;9[queue addBarrierBlock:^&#123;10 NSLog(@&quot;åˆ·æ–°é¡µé¢&quot;);11&#125;]; çº¿ç¨‹ç»„åœ¨nä¸ªè€—æ—¶å¹¶å‘ä»»åŠ¡éƒ½å®Œæˆåï¼Œå†å»æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»»åŠ¡ã€‚æ¯”å¦‚ï¼Œåœ¨nä¸ªç½‘ç»œè¯·æ±‚å®Œæˆåå»åˆ·æ–°UIé¡µé¢ 1dispatch_queue_t queue &#x3D; dispatch_queue_create(&quot;queue&quot;, DISPATCH_QUEUE_CONCURRENT);2dispatch_group_t group &#x3D; dispatch_group_create();3for (int i &#x3D; 0; i &lt; 10; i++) &#123;4 dispatch_group_async(group, queue, ^&#123;5 NSLog(@&quot;ç½‘ç»œè¯·æ±‚ ---- %d&quot;,i);6 &#125;);7&#125;8dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;9 NSLog(@&quot;åˆ·æ–°é¡µé¢&quot;);10&#125;); GCDå’ŒNSOperationæœ‰ä»€ä¹ˆåŒºåˆ« GCDæ˜¯çº¯Cè¯­è¨€çš„APIï¼›NSOperationæ˜¯åŸºäºGCDçš„OCç‰ˆæœ¬å°è£… GCDåªæ”¯æŒFIFOçš„é˜Ÿåˆ—ï¼›NSOperationå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒæ•´æ‰§è¡Œé¡ºåºï¼Œè®¾ç½®æœ€å¤§å¹¶å‘æ•°é‡ NSOperationQueueå¯ä»¥è½»æ¾åœ¨operationé—´è®¾ç½®ä¾èµ–å…³ç³»ï¼Œè€ŒGCDéœ€è¦äº›å¾ˆå¤šä»£ç æ‰èƒ½å®ç° NSOperationQueueæ”¯æŒKVOï¼Œå¯ä»¥æ£€æµ‹operationæ˜¯å¦æ­£åœ¨æ‰§è¡Œ(isExecuted)ï¼Œæ˜¯å¦ç»“æŸ(isFinish),æ˜¯å¦å–æ¶ˆ(isCancel) GCDçš„æ‰§è¡Œé€Ÿåº¦æ¯”NSOperationå¿«","categories":[],"tags":[{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"tags/å¤šçº¿ç¨‹/"}]},{"title":"SwiftUIå®è·µDemo","slug":"SwiftUIå­¦ä¹ ç¬”è®°åŠå®è·µ","date":"2019-10-17T02:12:40.000Z","updated":"2019-10-21T07:13:20.000Z","comments":true,"path":"2019/10/17/SwiftUIå­¦ä¹ ç¬”è®°åŠå®è·µ/","link":"","permalink":"2019/10/17/SwiftUIå­¦ä¹ ç¬”è®°åŠå®è·µ/","excerpt":"","text":"SwiftUIå…¥é—¨å­¦ä¹ å®è·µApple Developer SwiftUI ä¸€ã€SwiftUIæ˜¯ä»€ä¹ˆï¼Ÿ1. å®šä¹‰ï¼šSwiftUIæ˜¯è‹¹æœåœ¨ â€œWWDC-2019â€ æ¨å‡ºçš„ä¸€æ¬¾å…¨æ–°çš„ â€œå£°æ˜å¼UIâ€ æ¡†æ¶ã€‚ æ‹†å¼€çœ‹ï¼ŒSwift + UIï¼Œå³åŸºäºSwiftè¯­è¨€åŸºç¡€è¯­æ³•çš„UIæ¡†æ¶ 2. ç‰¹ç‚¹ï¼š â€œç®€æ´è¿…é€Ÿâ€çš„Swiftï¼šè¶Šæ¥è¶Šç®€æ´çš„Swiftè¯­æ³•ï¼Œé…ä¸ŠSwiftè¿…é€Ÿçš„ä¼˜åŠ¿ â€œå³è§†â€çš„UIï¼šé™ä½è°ƒè¯•æˆæœ¬ï¼Œä¸€è¾¹å†™codeã€ä¸€è¾¹å°±å¯å®æ—¶é¢„è§ˆæŸ¥çœ‹UIç•Œé¢ è·¨å¹³å°ï¼šä¸€å¥—ä»£ç ï¼Œå³å¯å®ŒæˆiOSã€iPadOSã€macOSã€watchOSçš„å¼€å‘ä¸é€‚é… â€œå£°æ˜å¼â€ç¼–ç¨‹ï¼š å¯¹æ¯”ä¹‹å‰çš„ â€œæŒ‡ä»¤å¼â€ç¼–ç¨‹ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å‘Šè¯‰è®¡ç®—æœºâ€œæ€ä¹ˆåšâ€ï¼Ÿ è€Œâ€œå£°æ˜å¼â€ç¼–ç¨‹æ˜¯è®©æˆ‘ä»¬å‘Šè¯‰è®¡ç®—æœº â€œåšä»€ä¹ˆâ€ï¼Ÿï¼ˆè‡³äºæœ€åº•å±‚æ€ä¹ˆåšï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒï¼‰ ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºå†™UIè€Œè¨€ï¼Œ æŒ‡ä»¤å¼ç¼–ç¨‹ï¼šå°±æ˜¯ï¼Œæ€ä¹ˆç”»ï¼Ÿ æŠŠæ¯ä¸ªframeã€layoutç­‰ç­‰ç»Ÿç»Ÿéœ€è¦è®¡ç®—åˆ°ä½ å£°æ˜å¼ç¼–ç¨‹ï¼šå°±æ˜¯ï¼Œç”»ä»€ä¹ˆï¼Ÿ æŠŠæƒ³è¦çš„æ•ˆæœæè¿°å‡ºæ¥ï¼Œå…¶ä»–éƒ½äº¤ç»™æ¡†æ¶å»åš 3. å¼€å‘ç¯å¢ƒï¼šè¿™ä¹ˆæ–°çš„æŠ€æœ¯è‚¯å®šéœ€è¦ç¯å¢ƒçš„æ”¯æŒã€‚SwiftUIæ‰€éœ€è¦çš„å¼€å‘ç¯å¢ƒï¼Œå¦‚ä¸‹ï¼š Xcodeï¼šXcode 11.1+ MacOSï¼šMacOS 10.15+ iOSï¼šiOS 13+ PSï¼šç”±äºSwiftUIåªèƒ½åº”ç”¨ä¸iOS 13ç³»ç»Ÿä»¥ä¸Šçš„è®¾å¤‡ã€‚ å› æ­¤ï¼Œè¿™é¡¹æŠ€æœ¯ä¸å»ºè®®ç”¨åœ¨éœ€è¦é€‚é…ä½ç‰ˆæœ¬ï¼ˆiOS 13 ä»¥ä¸‹ï¼‰çš„Appä¸Šã€‚ ä¸è¿‡å¦‚æœæ˜¯æ— éœ€é€‚é…ä½ç‰ˆæœ¬çš„æ–°é¡¹ç›®ï¼Œæˆ–è€…å­¦ä¹ è€…å…¨å¯ä»¥ä¸Šæ‰‹â€œç©ä¸€ç©â€ã€‚ æ¯•ç«Ÿè‹¹æœçš„æ–°æŠ€æœ¯è¿˜æ˜¯å¾ˆæœ‰æ„æ€çš„å˜›~ äºŒã€SwiftUIçš„åŸºæœ¬ç»„ä»¶ï¼ˆè¯­æ³•ï¼‰ è¿™å—çŸ¥è¯†æ¯”è¾ƒâ€œåŸºç¡€â€ä¸”â€œé‡è¦â€ã€‚åªæœ‰è®°ä½äº†è¿™äº›åŸºæœ¬ç»„ä»¶ï¼Œæ‰èƒ½ç”¨è¾ƒå°‘çš„ä»£ç å¼€å‘å‡ºç²¾ç¾çš„App ä¸‹é¢æ˜¯ä¸€äº›é‡è¦çš„SwiftUIç»„ä»¶ï¼š ç»„ä»¶ä»‹ç» åç§° å«ä¹‰ Text ç”¨æ¥æ˜¾ç¤ºæ–‡æœ¬çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UILabel Image ç”¨æ¥å±•ç¤ºå›¾ç‰‡çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UIImageView Button ç”¨äºå¯ç‚¹å‡»çš„æŒ‰é’®ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UIButton List ç”¨æ¥å±•ç¤ºåˆ—è¡¨çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UITableView ScrollView ç”¨æ¥æ”¯æŒæ»‘åŠ¨çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UIScrollView Spacer ä¸€ä¸ªçµæ´»çš„ç©ºé—´ï¼Œç”¨æ¥å¡«å……ç©ºç™½çš„ç»„ä»¶ Divider ä¸€æ¡åˆ†å‰²çº¿ï¼Œç”¨æ¥åˆ’åˆ†åŒºåŸŸçš„ç»„ä»¶ VStack å°†å­è§†å›¾æŒ‰â€œç«–ç›´æ–¹å‘â€æ’åˆ—å¸ƒå±€ã€‚ï¼ˆVertical stackï¼‰ HStack å°†å­è§†å›¾æŒ‰â€œæ°´å¹³æ–¹å‘â€æ’åˆ—å¸ƒå±€ã€‚ï¼ˆHorizontal stackï¼‰ ZStack å°†å­è§†å›¾æŒ‰â€œä¸¤è½´æ–¹å‘å‡å¯¹é½â€å¸ƒå±€ï¼ˆå±…ä¸­ï¼Œæœ‰é‡å æ•ˆæœï¼‰ åŸºæœ¬ç»„ä»¶ Textï¼šç”¨æ¥æ˜¾ç¤ºæ–‡æœ¬çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UILabel 1Text(\"Hello, we are QiShare!\").foregroundColor(.blue).font(.system(size: 32.0))2å¤åˆ¶ä»£ç  Imageï¼šç”¨æ¥å±•ç¤ºå›¾ç‰‡çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UIImageView 1Image.init(systemName: \"star.fill\").foregroundColor(.yellow)2å¤åˆ¶ä»£ç  Buttonï¼šç”¨äºå¯ç‚¹å‡»çš„æŒ‰é’®ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UIButton 1Button(action: &#123; self.showingProfile.toggle() &#125;) &#123;2 Image(systemName: \"paperplane.fill\")3 .imageScale(.large)4 .accessibility(label: Text(\"Right\"))5 .padding()6&#125;7å¤åˆ¶ä»£ç  Listï¼šç”¨æ¥å±•ç¤ºåˆ—è¡¨çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UITableView 1List(0..&lt;5)&#123;_ in2 NavigationLink.init(destination: VStack(alignment:.center)&#123;3 Image.init(systemName: \"\\(item+1).square.fill\").foregroundColor(.green)4 Text(\"è¯¦æƒ…ç•Œé¢\\(item + 1)\").font(.system(size: 16))5 &#125;) &#123;6 //ListRow7 &#125; ScrollViewï¼šç”¨æ¥æ”¯æŒæ»‘åŠ¨çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UIScrollView Spacerï¼šä¸€ä¸ªçµæ´»çš„ç©ºé—´ï¼Œç”¨æ¥å¡«å……ç©ºç™½çš„ç»„ä»¶ Dividerï¼šä¸€æ¡åˆ†å‰²çº¿ï¼Œç”¨æ¥åˆ’åˆ†åŒºåŸŸçš„ç»„ä»¶ å¸ƒå±€ç»„ä»¶ VStackï¼šå°†å­è§†å›¾æŒ‰â€œYè½´ç«–ç›´æ–¹å‘â€å¸ƒå±€ï¼ˆVertical stackï¼‰ HStackï¼šå°†å­è§†å›¾æŒ‰â€œXè½´æ°´å¹³æ–¹å‘â€å¸ƒå±€ï¼ˆHorizontal stackï¼‰ ZStackï¼šå°†å­è§†å›¾æŒ‰â€œXYä¸¤è½´æ–¹å‘å‡å¯¹é½â€å¸ƒå±€ åŠŸèƒ½ç»„ä»¶ NavigationViewï¼šè´Ÿè´£Appä¸­å¯¼èˆªåŠŸèƒ½çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UINavigationView NavigationLinkï¼šè´Ÿè´£Appé¡µé¢è·³è½¬çš„ç»„ä»¶ï¼Œç±»ä¼¼äºUINavigationViewä¸­çš„pushä¸popåŠŸèƒ½ 1NavigationView &#123;2 List(0..&lt;5)&#123;_ in3 NavigationLink.init(destination: VStack(alignment:.center)&#123;4 Image.init(systemName: \"\\(item+1).square.fill\").foregroundColor(.green)5 Text(\"è¯¦æƒ…ç•Œé¢\\(item + 1)\").font(.system(size: 16))6 &#125;) &#123;7 //ListRow8 &#125;9&#125;10.navigationBarTitle(\"å¯¼èˆª\\(item)\",displayMode: .inline) TabViewï¼šè´Ÿè´£Appä¸­çš„æ ‡ç­¾é¡µåŠŸèƒ½çš„ç»„ä»¶ï¼Œç±»ä¼¼UIKitä¸­çš„UITabBarController 1TabView &#123;2 Text(\"The First Tab\")3 .tabItem &#123;4 Image(systemName: \"1.square.fill\")5 Text(\"First\")6 &#125;7 Text(\"Another Tab\")8 .tabItem &#123;9 Image(systemName: \"2.square.fill\")10 Text(\"Second\")11 &#125;12 Text(\"The Last Tab\")13 .tabItem &#123;14 Image(systemName: \"3.square.fill\")15 Text(\"Third\")16 &#125;17&#125;18.font(.headline) ä¸‰ã€SwiftUIå¿«é€Ÿä¸Šæ‰‹å®è·µä¸‹é¢æ¥å¿«é€Ÿå®ç°ä¸€ä¸ªæœ‰TabViewã€NavigationViewã€Listçš„ç®€å•ç¤ºä¾‹Demo SF Symbols æ˜¯ä» iOS 13 å’Œ macOS 10.15 å¼€å§‹å†…ç½®äºç³»ç»Ÿä¸­çš„å­—ç¬¦å›¾æ ‡åº“ï¼Œå®ƒæä¾›äº†ä¸Šåƒç§å¸¸è§çš„çº¿æ¡å›¾æ ‡ï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥ä»»æ„åœ°ä¸ºå®ƒä»¬è®¾ç½®å°ºå¯¸ï¼Œé¢œè‰²ç­‰å±æ€§ã€‚Apple ç”šè‡³å‡†å¤‡äº†ä¸“é—¨çš„appï¼šSF Symbols æ¥å¸®åŠ©ä½ æŸ¥çœ‹å¯ç”¨çš„ç¬¦å·ï¼š æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ç”¨è¿™äº›Symbolsåˆ¶ä½œä¸ªå°Demo ContentView.swiftï¼š 1import SwiftUI23struct ContentView: View &#123;4 5 @State var isLeftNav = false6 @State var isRightNav = false7 8 init() &#123;9 //ä¿®æ”¹å¯¼èˆªæ æ–‡å­—é¢œè‰²10 UINavigationBar.appearance().largeTitleTextAttributes = [.foregroundColor: UIColor.systemBlue]11 UINavigationBar.appearance().titleTextAttributes = [.foregroundColor: UIColor.systemBlue]12 UINavigationBar.appearance().tintColor = .systemBlue13 &#125;14 15 var body: some View &#123;16 TabView &#123;17 18 // Tab1:19 NavigationView &#123;20 List(Symbols, id:\\.self) &#123;21 ListRow(symbol: $0)22 &#125;23 .navigationBarTitle(Text(\"SF Symbols\"))24 .navigationBarItems(leading: leftNavButton, trailing: rightNavButton)25 &#125;.tabItem &#123;26 Image.init(systemName: \"star.fill\")27 Text(\"Tab1\").font(.subheadline)28 &#125;29 30 // Tab2:31 NavigationView &#123;32 Text(\"This is the second tab.\")33 &#125;.tabItem &#123;34 Image.init(systemName: \"star.fill\")35 Text(\"Tab2\").font(.subheadline)36 &#125;37 &#125;38 &#125;39 40 var leftNavButton: some View &#123;41 Button(action: &#123; self.isLeftNav.toggle() &#125;) &#123;42 Image(systemName: \"person.crop.circle\")43 .imageScale(.large)44 .accessibility(label: Text(\"Left\"))45 .padding()46 &#125;47 .sheet(isPresented: $isLeftNav) &#123;48 VStack &#123;49 Text(\"Hello, we are QiShare!\").foregroundColor(.blue).font(.system(size: 32.0))5051 HStack &#123;52 Spacer()53 Spacer()54 Text(\"an iOS Team. \").fontWeight(.black).foregroundColor(.purple)55 Spacer()56 Text(\"We are learning SwiftUI.\").foregroundColor(.blue)57 Spacer()58 &#125;59 &#125;60 &#125;61 &#125;62 63 var rightNavButton: some View &#123;64 Button(action: &#123; self.isRightNav.toggle() &#125;) &#123;65 Image(systemName: \"paperplane.fill\")66 .imageScale(.large)67 .accessibility(label: Text(\"Right\"))68 .padding()69 &#125;70 .sheet(isPresented: $isRightNav, onDismiss: &#123;71 print(\"dissmiss RrightNav\")72 &#125;) &#123;73 ZStack &#123;74 Text(\"This is the Right Navi Button.\")75 &#125;76 &#125;77 &#125;78&#125; ListRow.swiftï¼šListå¯¹åº”çš„Cell 1struct ListRow: View &#123;2 var symbol: String3 var body: some View &#123;4 NavigationLink(destination: ListDetail(symbol: symbol)) &#123;5 6 HStack &#123;7 //å›¾ç‰‡8 Image(systemName: symbol)9 .resizable()10 .frame(width: 60, height: 60)11 .foregroundColor(Colors.randomElement())12 //åˆ†å‰²13 Divider()14 Spacer()15 //æ–‡å­—16 Text(symbol)17 Spacer()18 &#125;19 &#125;20 &#125;21&#125; ListDetail.swiftï¼š 1import SwiftUI23struct ListDetail: View &#123;4 5 var symbol: String6 7 var body: some View &#123;8 VStack &#123;9 10 Text(\"Image:\").font(.headline)11 12 Spacer()13 14 Image(systemName: symbol)15 .foregroundColor(Colors.randomElement())16 .imageScale(.large)17 .scaleEffect(3)18 .padding(.bottom, 100)19 20 Divider()21 22 Text(\"Image Name:\").font(.headline)23 Spacer()24 Text(symbol)25 .font(.largeTitle)26 Spacer()27 &#125;28 .navigationBarTitle(symbol)29 &#125;30&#125; æºç ï¼šæœ¬æ–‡Demo","categories":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"categories/SwiftUI/"}],"tags":[{"name":"SwiftUI","slug":"SwiftUI","permalink":"tags/SwiftUI/"}]},{"title":"iOSåº•å±‚åŸç†æ€»ç»“ - æ¢å¯»OCå¯¹è±¡çš„æœ¬è´¨","slug":"iOSåº•å±‚åŸç†æ€»ç»“ - æ¢å¯»OCå¯¹è±¡çš„æœ¬è´¨","date":"2018-07-17T01:08:40.000Z","updated":"2018-07-18T06:11:20.000Z","comments":true,"path":"2018/07/17/iOSåº•å±‚åŸç†æ€»ç»“ - æ¢å¯»OCå¯¹è±¡çš„æœ¬è´¨/","link":"","permalink":"2018/07/17/iOSåº•å±‚åŸç†æ€»ç»“ - æ¢å¯»OCå¯¹è±¡çš„æœ¬è´¨/","excerpt":"","text":"è½¬è½½è‡ªï¼šiOSåº•å±‚åŸç†æ€»ç»“ å¯¹å°ç å“¥åº•å±‚ç­è§†é¢‘å­¦ä¹ çš„æ€»ç»“ä¸è®°å½•ã€‚é¢è¯•é¢˜éƒ¨åˆ†ï¼Œé€šè¿‡å¯¹é¢è¯•é¢˜çš„åˆ†ææ¢ç´¢é—®é¢˜çš„æœ¬è´¨å†…å®¹ã€‚ é¢è¯•é¢˜ï¼šä¸€ä¸ªNSObjectå¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ï¼Ÿ æ¢å¯»OCå¯¹è±¡çš„æœ¬è´¨ï¼Œæˆ‘ä»¬å¹³æ—¶ç¼–å†™çš„Objective-Cä»£ç ï¼Œåº•å±‚å®ç°å…¶å®éƒ½æ˜¯C\\C++ä»£ç ã€‚ OCçš„å¯¹è±¡ç»“æ„éƒ½æ˜¯é€šè¿‡åŸºç¡€C\\C++çš„ç»“æ„ä½“å®ç°çš„ã€‚æˆ‘ä»¬é€šè¿‡åˆ›å»ºOCæ–‡ä»¶åŠå¯¹è±¡ï¼Œå¹¶å°†OCæ–‡ä»¶è½¬åŒ–ä¸ºC++æ–‡ä»¶æ¥æ¢å¯»OCå¯¹è±¡çš„æœ¬è´¨ OCå¦‚ä¸‹ä»£ç  1#import &lt;Foundation/Foundation.h&gt;23int main(int argc, const char * argv[]) &#123;4 @autoreleasepool &#123;5 NSObject *objc = [[NSObject alloc] init];6 NSLog(@\"Hello, World!\");7 &#125;8 return 0;9&#125; æˆ‘ä»¬é€šè¿‡å‘½ä»¤è¡Œå°†OCçš„mian.mæ–‡ä»¶è½¬åŒ–ä¸ºc++æ–‡ä»¶ã€‚ 1clang -rewrite-objc main.m -o main.cpp // è¿™ç§æ–¹å¼æ²¡æœ‰æŒ‡å®šæ¶æ„ä¾‹å¦‚arm64æ¶æ„ å…¶ä¸­cppä»£è¡¨ï¼ˆc plus plusï¼‰2ç”Ÿæˆ main.cpp æˆ‘ä»¬å¯ä»¥æŒ‡å®šæ¶æ„æ¨¡å¼çš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨xcodeå·¥å…· xcrun 1xcrun -sdk iphoneos clang -arch arm64 -rewrite-objc main.m -o main-arm64.cpp 2ç”Ÿæˆ main-arm64.cpp main-arm64.cpp æ–‡ä»¶ä¸­æœç´¢NSObjcetï¼Œå¯ä»¥æ‰¾åˆ°NSObjcet_IMPLï¼ˆIMPLä»£è¡¨ implementation å®ç°ï¼‰ æˆ‘ä»¬çœ‹ä¸€ä¸‹NSObject_IMPLå†…éƒ¨ 1struct NSObject_IMPL &#123;2 Class isa;3&#125;;4// æŸ¥çœ‹Classæœ¬è´¨5typedef struct objc_class *Class;6//æˆ‘ä»¬å‘ç°Classå…¶å®å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå¯¹è±¡åº•å±‚å®ç°å…¶å®å°±æ˜¯è¿™ä¸ªæ ·å­ã€‚ æ€è€ƒï¼š ä¸€ä¸ªOCå¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å¸ƒå±€çš„ã€‚ NSObjcetçš„åº•å±‚å®ç°ï¼Œç‚¹å‡»NSObjcetè¿›å…¥å‘ç°NSObjectçš„å†…éƒ¨å®ç° 1@interface NSObject &lt;NSObject&gt; &#123;2#pragma clang diagnostic push3#pragma clang diagnostic ignored \"-Wobjc-interface-ivars\"4 Class isa OBJC_ISA_AVAILABILITY;5#pragma clang diagnostic pop6&#125;7@end è½¬åŒ–ä¸ºcè¯­è¨€å…¶å®å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“ 1struct NSObject_IMPL &#123;2 Class isa;3&#125;; é‚£ä¹ˆè¿™ä¸ªç»“æ„ä½“å å¤šå¤§çš„å†…å­˜ç©ºé—´å‘¢ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ªç»“æ„ä½“åªæœ‰ä¸€ä¸ªæˆå‘˜ï¼ŒisaæŒ‡é’ˆï¼Œè€ŒæŒ‡é’ˆåœ¨64ä½æ¶æ„ä¸­å 8ä¸ªå­—èŠ‚ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªNSObjecå¯¹è±¡æ‰€å ç”¨çš„å†…å­˜æ˜¯8ä¸ªå­—èŠ‚ã€‚åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»å¯ä»¥åŸºæœ¬è§£ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ä½†æ˜¯æˆ‘ä»¬å‘ç°NSObjectå¯¹è±¡ä¸­è¿˜æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œé‚£è¿™äº›æ–¹æ³•ä¸å ç”¨å†…å­˜ç©ºé—´å—ï¼Ÿå…¶å®ç±»çš„æ–¹æ³•ç­‰ä¹Ÿå ç”¨å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•æ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´å¹¶ä¸åœ¨NSObjectå¯¹è±¡ä¸­ã€‚ ä¸ºäº†æ¢å¯»OCå¯¹è±¡åœ¨å†…å­˜ä¸­å¦‚ä½•ä½“ç°ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢ä¸€æ®µä»£ç  1NSObject *objc = [[NSObject alloc] init]; ä¸Šé¢ä¸€æ®µä»£ç åœ¨å†…å­˜ä¸­å¦‚ä½•ä½“ç°çš„å‘¢ï¼Ÿ ä¸Šè¿°ä¸€æ®µä»£ç ä¸­ç³»ç»Ÿä¸ºNSObjectå¯¹è±¡åˆ†é…8ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾ä¸€ä¸ªæˆå‘˜isaæŒ‡é’ˆã€‚ é‚£ä¹ˆisaæŒ‡é’ˆè¿™ä¸ªå˜é‡çš„åœ°å€å°±æ˜¯ç»“æ„ä½“çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯NSObjcetå¯¹è±¡çš„åœ°å€ã€‚ å‡è®¾isaçš„åœ°å€ä¸º0x100400110ï¼Œé‚£ä¹ˆä¸Šè¿°ä»£ç åˆ†é…å­˜å‚¨ç©ºé—´ç»™NSObjectå¯¹è±¡ï¼Œç„¶åå°†å­˜å‚¨ç©ºé—´çš„åœ°å€èµ‹å€¼ç»™objcæŒ‡é’ˆã€‚ objcå­˜å‚¨çš„å°±æ˜¯isaçš„åœ°å€ objcæŒ‡å‘å†…å­˜ä¸­NSObjectå¯¹è±¡åœ°å€ï¼Œå³æŒ‡å‘å†…å­˜ä¸­çš„ç»“æ„ä½“ï¼Œä¹Ÿå°±æ˜¯isaçš„ä½ç½®ã€‚ è‡ªå®šä¹‰ç±»çš„å†…éƒ¨å®ç°1@interface Student : NSObject&#123;2 3 @public4 int _no;5 int _age;6&#125;7@end8@implementation Student910int main(int argc, const char * argv[]) &#123;11 @autoreleasepool &#123;1213 Student *stu = [[Student alloc] init];14 stu -&gt; _no = 4;15 stu -&gt; _age = 5;16 17 NSLog(@\"%@\",stu);18 &#125;19 return 0;20&#125;21@end æŒ‰ç…§ä¸Šè¿°æ­¥éª¤åŒæ ·ç”Ÿæˆc++æ–‡ä»¶ã€‚å¹¶æŸ¥æ‰¾Studentï¼Œæˆ‘ä»¬å‘ç°Student_IMPL 1struct Student_IMPL &#123;2 struct NSObject_IMPL NSObject_IVARS;3 int _no;4 int _age;5&#125;; å‘ç°ç¬¬ä¸€ä¸ªæ˜¯ NSObject_IMPLçš„å®ç°ã€‚è€Œé€šè¿‡ä¸Šé¢çš„å®éªŒæˆ‘ä»¬çŸ¥é“NSObject_IMPLå†…éƒ¨å…¶å®å°±æ˜¯Class isa é‚£ä¹ˆæˆ‘ä»¬å‡è®¾ struct NSObject_IMPL NSObject_IVARS; ç­‰ä»·äº Class isa; å¯ä»¥å°†ä¸Šè¿°ä»£ç è½¬åŒ–ä¸º 1struct Student_IMPL &#123;2 Class *isa;3 int _no;4 int _age;5&#125;; å› æ­¤æ­¤ç»“æ„ä½“å ç”¨å¤šå°‘å­˜å‚¨ç©ºé—´ï¼Œå¯¹è±¡å°±å ç”¨å¤šå°‘å­˜å‚¨ç©ºé—´ã€‚å› æ­¤ç»“æ„ä½“å ç”¨çš„å­˜å‚¨ç©ºé—´ä¸ºï¼ŒisaæŒ‡é’ˆ8ä¸ªå­—èŠ‚ç©ºé—´+intç±»å‹_no4ä¸ªå­—èŠ‚ç©ºé—´+intç±»å‹_age4ä¸ªå­—èŠ‚ç©ºé—´å…±16ä¸ªå­—èŠ‚ç©ºé—´ 1Student *stu = [[Student alloc] init];2stu -&gt; _no = 4;3stu -&gt; _age = 5; é‚£ä¹ˆä¸Šè¿°ä»£ç å®é™…ä¸Šåœ¨å†…å­˜ä¸­çš„ä½“ç°ä¸ºï¼Œåˆ›å»ºStudentå¯¹è±¡é¦–å…ˆä¼šåˆ†é…16ä¸ªå­—èŠ‚ï¼Œå­˜å‚¨3ä¸ªä¸œè¥¿ï¼ŒisaæŒ‡é’ˆ8ä¸ªå­—èŠ‚ï¼Œ4ä¸ªå­—èŠ‚çš„_no ,4ä¸ªå­—èŠ‚çš„_age image.png sutdentå¯¹è±¡çš„3ä¸ªå˜é‡åˆ†åˆ«æœ‰è‡ªå·±çš„åœ°å€ã€‚è€ŒstuæŒ‡å‘isaæŒ‡é’ˆçš„åœ°å€ã€‚å› æ­¤stuçš„åœ°å€ä¸º0x100400110ï¼Œstuå¯¹è±¡åœ¨å†…å­˜ä¸­å ç”¨16ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚å¹¶ä¸”ç»è¿‡èµ‹å€¼ï¼Œ_noé‡Œé¢å­˜å‚¨4 ï¼Œ_ageé‡Œé¢å­˜å‚¨5 éªŒè¯Studentåœ¨å†…å­˜ä¸­æ¨¡æ · 1struct Student_IMPL &#123;2 Class isa;3 int _no;4 int _age;5&#125;;67@interface Student : NSObject8&#123;9 @public10 int _no;11 int _age;12&#125;13@end1415@implementation Student1617int main(int argc, const char * argv[]) &#123;18 @autoreleasepool &#123;19 // å¼ºåˆ¶è½¬åŒ–20 struct Student_IMPL *stuImpl = (__bridge struct Student_IMPL *)stu;21 NSLog(@\"_no = %d, _age = %d\", stuImpl-&gt;_no, stuImpl-&gt;_age); // æ‰“å°å‡º _no = 4, _age = 522 &#125;23 return 0;24&#125; ä¸Šè¿°ä»£ç å°†ocå¯¹è±¡å¼ºè½¬æˆStudent_IMPLçš„ç»“æ„ä½“ã€‚ä¹Ÿå°±æ˜¯è¯´æŠŠä¸€ä¸ªæŒ‡å‘ocå¯¹è±¡çš„æŒ‡é’ˆï¼ŒæŒ‡å‘è¿™ç§ç»“æ„ä½“ã€‚ç”±äºæˆ‘ä»¬ä¹‹å‰çŒœæƒ³ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€ä¸ç»“æ„ä½“åœ¨å†…å­˜ä¸­çš„å¸ƒå±€ç›¸åŒï¼Œé‚£ä¹ˆå¦‚æœå¯ä»¥è½¬åŒ–æˆåŠŸï¼Œè¯´æ˜æˆ‘ä»¬çš„çŒœæƒ³æ­£ç¡®ã€‚ç”±æ­¤è¯´æ˜stuè¿™ä¸ªå¯¹è±¡æŒ‡å‘çš„å†…å­˜ç¡®å®æ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚ å®é™…ä¸Šæƒ³è¦è·å–å¯¹è±¡å ç”¨å†…å­˜çš„å¤§å°ï¼Œå¯ä»¥é€šè¿‡æ›´ä¾¿æ·çš„è¿è¡Œæ—¶æ–¹æ³•æ¥è·å–ã€‚ 1class_getInstanceSize([Student class])2NSLog(@\"%zd,%zd\", class_getInstanceSize([NSObject class]) ,class_getInstanceSize([Student class]));3// æ‰“å°ä¿¡æ¯ 8å’Œ16 çª¥æ¢å†…å­˜ç»“æ„å®æ—¶æŸ¥çœ‹å†…å­˜æ•°æ® æ–¹å¼ä¸€ï¼šé€šè¿‡æ‰“æ–­ç‚¹ã€‚ Debug Workflow -&gt; viewMemory addressä¸­è¾“å…¥stuçš„åœ°å€ image ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°è¯»å–æ•°æ®ä»é«˜ä½æ•°æ®å¼€å§‹è¯»ï¼ŒæŸ¥çœ‹å‰16ä½å­—èŠ‚ï¼Œæ¯å››ä¸ªå­—èŠ‚è¯»å‡ºçš„æ•°æ®ä¸º 16è¿›åˆ¶ 0x0000004(4å­—èŠ‚) 0x0000005(4å­—èŠ‚) isaçš„åœ°å€ä¸º 00D1081000001119(8å­—èŠ‚) æ–¹å¼äºŒï¼šé€šè¿‡lldbæŒ‡ä»¤xcodeè‡ªå¸¦çš„è°ƒè¯•å™¨ 1memory read 0x10074c4502// ç®€å†™ x 0x10074c45034// å¢åŠ è¯»å–æ¡ä»¶5// memory read/æ•°é‡æ ¼å¼å­—èŠ‚æ•° å†…å­˜åœ°å€6// ç®€å†™ x/æ•°é‡æ ¼å¼å­—èŠ‚æ•° å†…å­˜åœ°å€7// æ ¼å¼ xæ˜¯16è¿›åˆ¶ï¼Œfæ˜¯æµ®ç‚¹ï¼Œdæ˜¯10è¿›åˆ¶8// å­—èŠ‚å¤§å° bï¼šbyte 1å­—èŠ‚ï¼Œhï¼šhalf word 2å­—èŠ‚ï¼Œwï¼šword 4å­—èŠ‚ï¼Œgï¼šgiant word 8å­—èŠ‚910ç¤ºä¾‹ï¼šx/4xw // /åé¢è¡¨ç¤ºå¦‚ä½•è¯»å–æ•°æ® wè¡¨ç¤º4ä¸ªå­—èŠ‚4ä¸ªå­—èŠ‚è¯»å–ï¼Œxè¡¨ç¤ºä»¥16è¿›åˆ¶çš„æ–¹å¼è¯»å–æ•°æ®ï¼Œ4åˆ™è¡¨ç¤ºè¯»å–4æ¬¡ åŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡lldbä¿®æ”¹å†…å­˜ä¸­çš„å€¼ 1memory write 0x100400c68 62å°†_noçš„å€¼æ”¹ä¸ºäº†6 image é‚£ä¹ˆä¸€ä¸ªNSObjectå¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ï¼Ÿ NSObjcetå®é™…ä¸Šæ˜¯åªæœ‰ä¸€ä¸ªåä¸ºisaçš„æŒ‡é’ˆçš„ç»“æ„ä½“ï¼Œå› æ­¤å ç”¨ä¸€ä¸ªæŒ‡é’ˆå˜é‡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å¤§å°ï¼Œå¦‚æœ64bitå ç”¨8ä¸ªå­—èŠ‚ï¼Œå¦‚æœ32bitå ç”¨4ä¸ªå­—èŠ‚ã€‚ æ›´å¤æ‚çš„ç»§æ‰¿å…³ç³» é¢è¯•é¢˜ï¼šåœ¨64bitç¯å¢ƒä¸‹ï¼Œ ä¸‹é¢ä»£ç çš„è¾“å‡ºå†…å®¹ï¼Ÿ 1/* Person */2@interface Person : NSObject3&#123;4 int _age;5&#125;6@end78@implementation Person9@end1011/* Student */12@interface Student : Person13&#123;14 int _no;15&#125;16@end1718@implementation Student19@end2021int main(int argc, const char * argv[]) &#123;22 @autoreleasepool &#123;2324 NSLog(@\"%zd %zd\",25 class_getInstanceSize([Person class]),26 class_getInstanceSize([Student class])27 );28 &#125;29 return 0;30&#125; è¿™é“é¢è¯•é¢˜çš„å®è´¨æ˜¯æƒ³é—®ä¸€ä¸ªPersonå¯¹è±¡ï¼Œä¸€ä¸ªStudentå¯¹è±¡åˆ†åˆ«å ç”¨å¤šå°‘å†…å­˜ç©ºé—´ï¼Ÿ æˆ‘ä»¬ä¾æ®ä¸Šé¢çš„åˆ†æä¸å‘ç°ï¼Œç±»å¯¹è±¡å®è´¨ä¸Šæ˜¯ä»¥ç»“æ„ä½“çš„å½¢å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œç”»å‡ºçœŸæ­£çš„å†…å­˜å›¾ä¾‹ image æˆ‘ä»¬å‘ç°åªè¦æ˜¯ç»§æ‰¿è‡ªNSObjectçš„å¯¹è±¡ï¼Œé‚£ä¹ˆåº•å±‚ç»“æ„ä½“å†…ä¸€å®šæœ‰ä¸€ä¸ªisaæŒ‡é’ˆã€‚ é‚£ä¹ˆä»–ä»¬æ‰€å çš„å†…å­˜ç©ºé—´æ˜¯å¤šå°‘å‘¢ï¼Ÿå•çº¯çš„å°†æŒ‡é’ˆå’Œæˆå‘˜å˜é‡æ‰€å çš„å†…å­˜ç›¸åŠ å³å¯å—ï¼Ÿä¸Šè¿°ä»£ç å®é™…æ‰“å°çš„å†…å®¹æ˜¯16 16ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œpersonå¯¹è±¡å’Œstudentå¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´éƒ½ä¸º16ä¸ªå­—èŠ‚ã€‚ å…¶å®å®é™…ä¸Špersonå¯¹è±¡ç¡®å®åªä½¿ç”¨äº†12ä¸ªå­—èŠ‚ã€‚ä½†æ˜¯å› ä¸ºå†…å­˜å¯¹é½çš„åŸå› ã€‚ä½¿personå¯¹è±¡ä¹Ÿå ç”¨16ä¸ªå­—èŠ‚ã€‚ ç¼–è¯‘å™¨åœ¨ç»™ç»“æ„ä½“å¼€è¾Ÿç©ºé—´æ—¶ï¼Œé¦–å…ˆæ‰¾åˆ°ç»“æ„ä½“ä¸­æœ€å®½çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç„¶åå¯»æ‰¾å†…å­˜åœ°å€èƒ½æ˜¯è¯¥åŸºæœ¬æ•°æ®ç±»å‹çš„æ•´å€çš„ä½ç½®ï¼Œä½œä¸ºç»“æ„ä½“çš„é¦–åœ°å€ã€‚å°†è¿™ä¸ªæœ€å®½çš„åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°ä½œä¸ºå¯¹é½æ¨¡æ•°ã€‚ ä¸ºç»“æ„ä½“çš„ä¸€ä¸ªæˆå‘˜å¼€è¾Ÿç©ºé—´ä¹‹å‰ï¼Œç¼–è¯‘å™¨é¦–å…ˆæ£€æŸ¥é¢„å¼€è¾Ÿç©ºé—´çš„é¦–åœ°å€ç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„åç§»æ˜¯å¦æ˜¯æœ¬æˆå‘˜çš„æ•´æ•°å€ï¼Œè‹¥æ˜¯ï¼Œåˆ™å­˜æ”¾æœ¬æˆå‘˜ï¼Œåä¹‹ï¼Œåˆ™åœ¨æœ¬æˆå‘˜å’Œä¸Šä¸€ä¸ªæˆå‘˜ä¹‹é—´å¡«å……ä¸€å®šçš„å­—èŠ‚ï¼Œä»¥è¾¾åˆ°æ•´æ•°å€çš„è¦æ±‚ï¼Œä¹Ÿå°±æ˜¯å°†é¢„å¼€è¾Ÿç©ºé—´çš„é¦–åœ°å€åç§»å‡ ä¸ªå­—èŠ‚ã€‚ æˆ‘ä»¬å¯ä»¥æ€»ç»“å†…å­˜å¯¹é½ä¸ºä¸¤ä¸ªåŸåˆ™ï¼š åŸåˆ™ 1. å‰é¢çš„åœ°å€å¿…é¡»æ˜¯åé¢çš„åœ°å€æ­£æ•°å€,ä¸æ˜¯å°±è¡¥é½ã€‚ åŸåˆ™ 2. æ•´ä¸ªStructçš„åœ°å€å¿…é¡»æ˜¯æœ€å¤§å­—èŠ‚çš„æ•´æ•°å€ã€‚ é€šè¿‡ä¸Šè¿°å†…å­˜å¯¹é½çš„åŸåˆ™æˆ‘ä»¬æ¥çœ‹ï¼Œpersonå¯¹è±¡çš„ç¬¬ä¸€ä¸ªåœ°å€è¦å­˜æ”¾isaæŒ‡é’ˆéœ€è¦8ä¸ªå­—èŠ‚ï¼Œç¬¬äºŒä¸ªåœ°å€è¦å­˜æ”¾_ageæˆå‘˜å˜é‡éœ€è¦4ä¸ªå­—èŠ‚ï¼Œæ ¹æ®åŸåˆ™ä¸€ï¼Œ8æ˜¯4çš„æ•´æ•°å€ï¼Œç¬¦åˆåŸåˆ™ä¸€ï¼Œä¸éœ€è¦è¡¥é½ã€‚ç„¶åæ£€æŸ¥åŸåˆ™2ï¼Œç›®å‰personå¯¹è±¡å…±å æ®12ä¸ªå­—èŠ‚çš„å†…å­˜ï¼Œä¸æ˜¯æœ€å¤§å­—èŠ‚æ•°8ä¸ªå­—èŠ‚çš„æ•´æ•°å€ï¼Œæ‰€ä»¥éœ€è¦è¡¥é½4ä¸ªå­—èŠ‚ï¼Œå› æ­¤personå¯¹è±¡å°±å ç”¨16ä¸ªå­—èŠ‚ç©ºé—´ã€‚ è€Œå¯¹äºstudentå¯¹è±¡ï¼Œæˆ‘ä»¬çŸ¥é“sutdentå¯¹è±¡ä¸­ï¼ŒåŒ…å«personå¯¹è±¡çš„ç»“æ„ä½“å®ç°ï¼Œå’Œä¸€ä¸ªintç±»å‹çš„_noæˆå‘˜å˜é‡ï¼ŒåŒæ ·isaæŒ‡é’ˆ8ä¸ªå­—èŠ‚ï¼Œ_ageæˆå‘˜å˜é‡4ä¸ªå­—èŠ‚ï¼Œ_noæˆå‘˜å˜é‡4ä¸ªå­—èŠ‚ï¼Œåˆšå¥½æ»¡è¶³åŸåˆ™1å’ŒåŸåˆ™2ï¼Œæ‰€ä»¥studentå¯¹è±¡å æ®çš„å†…å­˜ç©ºé—´ä¹Ÿæ˜¯16ä¸ªå­—èŠ‚ã€‚ OCå¯¹è±¡çš„åˆ†ç±» é¢è¯•é¢˜ï¼šOCçš„ç±»ä¿¡æ¯å­˜æ”¾åœ¨å“ªé‡Œã€‚ é¢è¯•é¢˜ï¼šå¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘å“ªé‡Œã€‚ ç¤ºä¾‹ä»£ç  1#import &lt;Foundation/Foundation.h&gt;2#import &lt;objc/runtime.h&gt;34/* Person */ 5@interface Person : NSObject &lt;NSCopying&gt;6&#123;7 @public8 int _age;9&#125;10@property (nonatomic, assign) int height;11- (void)personMethod;12+ (void)personClassMethod;13@end1415@implementation Person16- (void)personMethod &#123;&#125;17+ (void)personClassMethod &#123;&#125;18@end1920/* Student */21@interface Student : Person &lt;NSCoding&gt;22&#123;23 @public24 int _no;25&#125;26@property (nonatomic, assign) int score;27- (void)studentMethod;28+ (void)studentClassMethod;29@end3031@implementation Student32- (void)studentMethod &#123;&#125;33+ (void)studentClassMethod &#123;&#125;34@end3536int main(int argc, const char * argv[]) &#123;37 @autoreleasepool &#123; 38 NSObject *object1 = [[NSObject alloc] init];39 NSObject *object2 = [[NSObject alloc] init];4041 Student *stu = [[Student alloc] init];42 [Student load];4344 Person *p1 = [[Person alloc] init];45 p1-&gt;_age = 10;46 [p1 personMethod];47 [Person personClassMethod];48 Person *p2 = [[Person alloc] init];49 p2-&gt;_age = 20;50 &#125;51 return 0;52&#125; OCçš„ç±»ä¿¡æ¯å­˜æ”¾åœ¨å“ªé‡Œ OCå¯¹è±¡ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸‰ç§ instanceå¯¹è±¡ï¼ˆå®ä¾‹å¯¹è±¡ï¼‰ classå¯¹è±¡ï¼ˆç±»å¯¹è±¡ï¼‰ meta-classå¯¹è±¡ï¼ˆå…ƒç±»å¯¹è±¡ï¼‰ instanceå¯¹è±¡å°±æ˜¯é€šè¿‡ç±»allocå‡ºæ¥çš„å¯¹è±¡ï¼Œæ¯æ¬¡è°ƒç”¨allocéƒ½ä¼šäº§ç”Ÿæ–°çš„instanceå¯¹è±¡ 1NSObjcet *object1 = [[NSObjcet alloc] init];2NSObjcet *object2 = [[NSObjcet alloc] init]; object1å’Œobject2éƒ½æ˜¯NSObjectçš„instaceå¯¹è±¡ï¼ˆå®ä¾‹å¯¹è±¡ï¼‰ï¼Œä½†ä»–ä»¬æ˜¯ä¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”åˆ†åˆ«å æ®ç€ä¸¤å—ä¸åŒçš„å†…å­˜ã€‚ instanceå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯åŒ…æ‹¬ isaæŒ‡é’ˆ å…¶ä»–æˆå‘˜å˜é‡ image è¡ç”Ÿé—®é¢˜ï¼šåœ¨ä¸Šå›¾å®ä¾‹å¯¹è±¡ä¸­æ ¹æœ¬æ²¡æœ‰çœ‹åˆ°æ–¹æ³•ï¼Œé‚£ä¹ˆå®ä¾‹å¯¹è±¡çš„æ–¹æ³•çš„ä»£ç æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿé‚£ä¹ˆç±»çš„æ–¹æ³•çš„ä¿¡æ¯ï¼Œåè®®çš„ä¿¡æ¯ï¼Œå±æ€§çš„ä¿¡æ¯éƒ½å­˜æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ classå¯¹è±¡ æˆ‘ä»¬é€šè¿‡classæ–¹æ³•æˆ–runtimeæ–¹æ³•å¾—åˆ°ä¸€ä¸ªclasså¯¹è±¡ã€‚classå¯¹è±¡ä¹Ÿå°±æ˜¯ç±»å¯¹è±¡ 1Class objectClass1 = [object1 class];2Class objectClass2 = [object2 class];3Class objectClass3 = [NSObject class];45// runtime6Class objectClass4 = object_getClass(object1);7Class objectClass5 = object_getClass(object2);8NSLog(@\"%p %p %p %p %p\", objectClass1, objectClass2, objectClass3, objectClass4, objectClass5); æ¯ä¸€ä¸ªç±»åœ¨å†…å­˜ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªclasså¯¹è±¡ã€‚å¯ä»¥é€šè¿‡æ‰“å°å†…å­˜åœ°å€è¯æ˜ classå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ isaæŒ‡é’ˆ superclassæŒ‡é’ˆ ç±»çš„å±æ€§ä¿¡æ¯ï¼ˆ@propertyï¼‰ï¼Œç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯ï¼ˆivarï¼‰ ç±»çš„å¯¹è±¡æ–¹æ³•ä¿¡æ¯ï¼ˆinstance methodï¼‰ï¼Œç±»çš„åè®®ä¿¡æ¯ï¼ˆprotocolï¼‰ image æˆå‘˜å˜é‡çš„å€¼æ—¶å­˜å‚¨åœ¨å®ä¾‹å¯¹è±¡ä¸­çš„ï¼Œå› ä¸ºåªæœ‰å½“æˆ‘ä»¬åˆ›å»ºå®ä¾‹å¯¹è±¡çš„æ—¶å€™æ‰ä¸ºæˆå‘˜å˜èµ‹å€¼ã€‚ä½†æ˜¯æˆå‘˜å˜é‡å«ä»€ä¹ˆåå­—ï¼Œæ˜¯ä»€ä¹ˆç±»å‹ï¼Œåªéœ€è¦æœ‰ä¸€ä»½å°±å¯ä»¥äº†ã€‚æ‰€ä»¥å­˜å‚¨åœ¨classå¯¹è±¡ä¸­ã€‚ ç±»æ–¹æ³•æ”¾åœ¨é‚£é‡Œï¼Ÿ å…ƒç±»å¯¹è±¡ meta-class 1//runtimeä¸­ä¼ å…¥ç±»å¯¹è±¡æ­¤æ—¶å¾—åˆ°çš„å°±æ˜¯å…ƒç±»å¯¹è±¡2Class objectMetaClass = object_getClass([NSObject class]);3// è€Œè°ƒç”¨ç±»å¯¹è±¡çš„classæ–¹æ³•æ—¶å¾—åˆ°è¿˜æ˜¯ç±»å¯¹è±¡ï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡éƒ½æ˜¯ç±»å¯¹è±¡4Class cls = [[NSObject class] class];5Class objectClass3 = [NSObject class];6class_isMetaClass(objectMetaClass) // åˆ¤æ–­è¯¥å¯¹è±¡æ˜¯å¦ä¸ºå…ƒç±»å¯¹è±¡7NSLog(@\"%p %p %p\", objectMetaClass, objectClass3, cls); // åé¢ä¸¤ä¸ªåœ°å€ç›¸åŒï¼Œè¯´æ˜å¤šæ¬¡è°ƒç”¨classå¾—åˆ°çš„è¿˜æ˜¯ç±»å¯¹è±¡ æ¯ä¸ªç±»åœ¨å†…å­˜ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªmeta-classå¯¹è±¡ã€‚ meta-classå¯¹è±¡å’Œclasså¯¹è±¡çš„å†…å­˜ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”¨é€”ä¸ä¸€æ ·ï¼Œåœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ isaæŒ‡é’ˆ superclassæŒ‡é’ˆ ç±»çš„ç±»æ–¹æ³•çš„ä¿¡æ¯ï¼ˆclass methodï¼‰ image meta-classå¯¹è±¡å’Œclasså¯¹è±¡çš„å†…å­˜ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥meta-classä¸­ä¹Ÿæœ‰ç±»çš„å±æ€§ä¿¡æ¯ï¼Œç±»çš„å¯¹è±¡æ–¹æ³•ä¿¡æ¯ç­‰æˆå‘˜å˜é‡ï¼Œä½†æ˜¯å…¶ä¸­çš„å€¼å¯èƒ½æ˜¯ç©ºçš„ã€‚ å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘å“ªé‡Œ å½“å¯¹è±¡è°ƒç”¨å®ä¾‹æ–¹æ³•çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸Šé¢è®²åˆ°ï¼Œå®ä¾‹æ–¹æ³•ä¿¡æ¯æ˜¯å­˜å‚¨åœ¨classç±»å¯¹è±¡ä¸­çš„ï¼Œé‚£ä¹ˆè¦æƒ³æ‰¾åˆ°å®ä¾‹æ–¹æ³•ï¼Œå°±å¿…é¡»æ‰¾åˆ°classç±»å¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ—¶isaçš„ä½œç”¨å°±æ¥äº†ã€‚ 1[stu studentMethod]; instanceçš„isaæŒ‡å‘classï¼Œå½“è°ƒç”¨å¯¹è±¡æ–¹æ³•æ—¶ï¼Œé€šè¿‡instanceçš„isaæ‰¾åˆ°classï¼Œæœ€åæ‰¾åˆ°å¯¹è±¡æ–¹æ³•çš„å®ç°è¿›è¡Œè°ƒç”¨ã€‚ å½“ç±»å¯¹è±¡è°ƒç”¨ç±»æ–¹æ³•çš„æ—¶å€™ï¼ŒåŒä¸Šï¼Œç±»æ–¹æ³•æ˜¯å­˜å‚¨åœ¨meta-classå…ƒç±»å¯¹è±¡ä¸­çš„ã€‚é‚£ä¹ˆè¦æ‰¾åˆ°ç±»æ–¹æ³•ï¼Œå°±éœ€è¦æ‰¾åˆ°meta-classå…ƒç±»å¯¹è±¡ï¼Œè€Œclassç±»å¯¹è±¡çš„isaæŒ‡é’ˆå°±æŒ‡å‘å…ƒç±»å¯¹è±¡ 1[Student studentClassMethod]; classçš„isaæŒ‡å‘meta-class å½“è°ƒç”¨ç±»æ–¹æ³•æ—¶ï¼Œé€šè¿‡classçš„isaæ‰¾åˆ°meta-classï¼Œæœ€åæ‰¾åˆ°ç±»æ–¹æ³•çš„å®ç°è¿›è¡Œè°ƒç”¨ image å½“å¯¹è±¡è°ƒç”¨å…¶çˆ¶ç±»å¯¹è±¡æ–¹æ³•çš„æ—¶å€™ï¼Œåˆæ˜¯æ€ä¹ˆæ‰¾åˆ°çˆ¶ç±»å¯¹è±¡æ–¹æ³•çš„å‘¢ï¼Ÿï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨åˆ°classç±»å¯¹è±¡superclassæŒ‡é’ˆã€‚ 1[stu personMethod];2[stu init]; å½“Studentçš„instanceå¯¹è±¡è¦è°ƒç”¨Personçš„å¯¹è±¡æ–¹æ³•æ—¶ï¼Œä¼šå…ˆé€šè¿‡isaæ‰¾åˆ°Studentçš„classï¼Œç„¶åé€šè¿‡superclassæ‰¾åˆ°Personçš„classï¼Œæœ€åæ‰¾åˆ°å¯¹è±¡æ–¹æ³•çš„å®ç°è¿›è¡Œè°ƒç”¨ï¼ŒåŒæ ·å¦‚æœPersonå‘ç°è‡ªå·±æ²¡æœ‰å“åº”çš„å¯¹è±¡æ–¹æ³•ï¼Œåˆä¼šé€šè¿‡Personçš„superclassæŒ‡é’ˆæ‰¾åˆ°NSObjectçš„classå¯¹è±¡ï¼Œå»å¯»æ‰¾å“åº”çš„æ–¹æ³• image å½“ç±»å¯¹è±¡è°ƒç”¨çˆ¶ç±»çš„ç±»æ–¹æ³•æ—¶ï¼Œå°±éœ€è¦å…ˆé€šè¿‡isaæŒ‡é’ˆæ‰¾åˆ°meta-classï¼Œç„¶åé€šè¿‡superclasså»å¯»æ‰¾å“åº”çš„æ–¹æ³• 1[Student personClassMethod];2[Student load]; å½“Studentçš„classè¦è°ƒç”¨Personçš„ç±»æ–¹æ³•æ—¶ï¼Œä¼šå…ˆé€šè¿‡isaæ‰¾åˆ°Studentçš„meta-classï¼Œç„¶åé€šè¿‡superclassæ‰¾åˆ°Personçš„meta-classï¼Œæœ€åæ‰¾åˆ°ç±»æ–¹æ³•çš„å®ç°è¿›è¡Œè°ƒç”¨ æœ€ååˆæ˜¯è¿™å¼ é™å®šçš„isaæŒ‡å‘å›¾ï¼Œç»è¿‡ä¸Šé¢çš„åˆ†ææˆ‘ä»¬åœ¨æ¥çœ‹è¿™å¼ å›¾ï¼Œå°±æ˜¾å¾—æ¸…æ™°æ˜äº†å¾ˆå¤šã€‚ image å¯¹isaã€superclassæ€»ç»“ instanceçš„isaæŒ‡å‘class classçš„isaæŒ‡å‘meta-class meta-classçš„isaæŒ‡å‘åŸºç±»çš„meta-classï¼ŒåŸºç±»çš„isaæŒ‡å‘è‡ªå·± classçš„superclassæŒ‡å‘çˆ¶ç±»çš„classï¼Œå¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼ŒsuperclassæŒ‡é’ˆä¸ºnil meta-classçš„superclassæŒ‡å‘çˆ¶ç±»çš„meta-classï¼ŒåŸºç±»çš„meta-classçš„superclassæŒ‡å‘åŸºç±»çš„class instanceè°ƒç”¨å¯¹è±¡æ–¹æ³•çš„è½¨è¿¹ï¼Œisaæ‰¾åˆ°classï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡superclassæ‰¾çˆ¶ç±» classè°ƒç”¨ç±»æ–¹æ³•çš„è½¨è¿¹ï¼Œisaæ‰¾meta-classï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡superclassæ‰¾çˆ¶ç±» å¦‚ä½•è¯æ˜isaæŒ‡é’ˆçš„æŒ‡å‘çœŸçš„å¦‚ä¸Šé¢æ‰€è¯´ï¼Ÿæˆ‘ä»¬é€šè¿‡å¦‚ä¸‹ä»£ç è¯æ˜ï¼š 1NSObject *object = [[NSObject alloc] init];2Class objectClass = [NSObject class];3Class objectMetaClass = object_getClass([NSObject class]);45NSLog(@\"%p %p %p\", object, objectClass, objectMetaClass); æ‰“æ–­ç‚¹å¹¶é€šè¿‡æ§åˆ¶å°æ‰“å°ç›¸åº”å¯¹è±¡çš„isaæŒ‡é’ˆ image æˆ‘ä»¬å‘ç°object-&gt;isaä¸objectClassçš„åœ°å€ä¸åŒï¼Œè¿™æ˜¯å› ä¸ºä»64bitå¼€å§‹ï¼Œisaéœ€è¦è¿›è¡Œä¸€æ¬¡ä½è¿ç®—ï¼Œæ‰èƒ½è®¡ç®—å‡ºçœŸå®åœ°å€ã€‚è€Œä½è¿ç®—çš„å€¼æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹è½½objcæºä»£ç æ‰¾åˆ°ã€‚ image æˆ‘ä»¬é€šè¿‡ä½è¿ç®—è¿›è¡ŒéªŒè¯ã€‚ image æˆ‘ä»¬å‘ç°ï¼Œobject-isaæŒ‡é’ˆåœ°å€0x001dffff96537141ç»è¿‡åŒ0x00007ffffffffff8ä½è¿ç®—ï¼Œå¾—å‡ºobjectClassçš„åœ°å€0x00007fff96537140 æ¥ç€æˆ‘ä»¬æ¥éªŒè¯classå¯¹è±¡çš„isaæŒ‡é’ˆæ˜¯å¦åŒæ ·éœ€è¦ä½è¿ç®—è®¡ç®—å‡ºmeta-classå¯¹è±¡çš„åœ°å€ã€‚ å½“æˆ‘ä»¬ä»¥åŒæ ·çš„æ–¹å¼æ‰“å°objectClass-&gt;isaæŒ‡é’ˆæ—¶ï¼Œå‘ç°æ— æ³•æ‰“å° image åŒæ—¶ä¹Ÿå‘ç°å·¦è¾¹objectClasså¯¹è±¡ä¸­å¹¶æ²¡æœ‰isaæŒ‡é’ˆã€‚æˆ‘ä»¬æ¥åˆ°Classå†…éƒ¨çœ‹ä¸€ä¸‹ 1typedef struct objc_class *Class;23struct objc_class &#123;4 Class _Nonnull isa OBJC_ISA_AVAILABILITY;56#if !__OBJC2__7 Class _Nullable super_class OBJC2_UNAVAILABLE;8 const char * _Nonnull name OBJC2_UNAVAILABLE;9 long version OBJC2_UNAVAILABLE;10 long info OBJC2_UNAVAILABLE;11 long instance_size OBJC2_UNAVAILABLE;12 struct objc_ivar_list * _Nullable ivars OBJC2_UNAVAILABLE;13 struct objc_method_list * _Nullable * _Nullable methodLists OBJC2_UNAVAILABLE;14 struct objc_cache * _Nonnull cache OBJC2_UNAVAILABLE;15 struct objc_protocol_list * _Nullable protocols OBJC2_UNAVAILABLE;16#endif1718&#125; OBJC2_UNAVAILABLE;19/* Use `Class` instead of `struct objc_class *` */ ç›¸ä¿¡äº†è§£è¿‡isaæŒ‡é’ˆçš„åŒå­¦å¯¹objc_classç»“æ„ä½“å†…çš„å†…å®¹å¾ˆç†Ÿæ‚‰äº†ï¼Œä»Šå¤©è¿™é‡Œä¸æ·±å…¥ç ”ç©¶ï¼Œæˆ‘ä»¬åªçœ‹ç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªisaæŒ‡é’ˆï¼Œä¸ºäº†æ‹¿åˆ°isaæŒ‡é’ˆçš„åœ°å€ï¼Œæˆ‘ä»¬è‡ªå·±åˆ›å»ºä¸€ä¸ªåŒæ ·çš„ç»“æ„ä½“å¹¶é€šè¿‡å¼ºåˆ¶è½¬åŒ–æ‹¿åˆ°isaæŒ‡é’ˆã€‚ 1struct xx_cc_objc_class&#123;2 Class isa;3&#125;;45Class objectClass = [NSObject class];6struct xx_cc_objc_class *objectClass2 = (__bridge struct xx_cc_objc_class *)(objectClass); æ­¤æ—¶æˆ‘ä»¬é‡æ–°éªŒè¯ä¸€ä¸‹ image ç¡®å®ï¼ŒobjectClass2çš„isaæŒ‡é’ˆç»è¿‡ä½è¿ç®—ä¹‹åçš„åœ°å€æ˜¯meta-classçš„åœ°å€ã€‚ æœ¬æ–‡é¢è¯•é¢˜æ€»ç»“ï¼š ä¸€ä¸ªNSObjectå¯¹è±¡å ç”¨å¤šå°‘å†…å­˜ï¼Ÿ ç­”ï¼šä¸€ä¸ªæŒ‡é’ˆå˜é‡æ‰€å ç”¨çš„å¤§å°ï¼ˆ64bitå 8ä¸ªå­—èŠ‚ï¼Œ32bitå 4ä¸ªå­—èŠ‚ï¼‰ å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘å“ªé‡Œï¼Ÿ ç­”ï¼šinstanceå¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘classå¯¹è±¡ï¼Œclasså¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘meta-classå¯¹è±¡ï¼Œmeta-classå¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘åŸºç±»çš„meta-classå¯¹è±¡ï¼ŒåŸºç±»è‡ªå·±çš„isaæŒ‡é’ˆä¹ŸæŒ‡å‘è‡ªå·±ã€‚ OCçš„ç±»ä¿¡æ¯å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ ç­”ï¼šæˆå‘˜å˜é‡çš„å…·ä½“å€¼å­˜æ”¾åœ¨instanceå¯¹è±¡ã€‚å¯¹è±¡æ–¹æ³•ï¼Œåè®®ï¼Œå±æ€§ï¼Œæˆå‘˜å˜é‡ä¿¡æ¯å­˜æ”¾åœ¨classå¯¹è±¡ã€‚ç±»æ–¹æ³•ä¿¡æ¯å­˜æ”¾åœ¨meta-classå¯¹è±¡ã€‚ åº•å±‚åŸç†ç›¸å…³æ–‡ç« ï¼šiOSåº•å±‚åŸç†æ€»ç»“ - æ–‡é›†","categories":[{"name":"iOS","slug":"iOS","permalink":"categories/iOS/"}],"tags":[{"name":"OC","slug":"OC","permalink":"tags/OC/"}]}]}